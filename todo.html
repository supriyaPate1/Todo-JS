<html>
    <head>
        <title>TODO List</title>
        <link href="style.css" type="text/css" rel="stylesheet">
    </head>
    <body>
        <div class="container">
            <h2>TODO LIST</h2>
            <h3>Add Item</h3>
            <p>
                <input id="new-task" type="text">
                <button id='addBtn' class="update" onclick="myFun()">Add</button>
            </p>
    
            <h3>Todo</h3>
            <ul id="incomplete-tasks" onclick="editAndDel(event)">
                <li><input type="checkbox" class="checkbox"><label>Pay Bills</label><input type="text"><button class="edit" >Edit</button><button class="delete">Delete</button></li>
                <li><input type="checkbox" class="checkbox"><label>Go Shopping</label><input type="text" value="Go Shopping"><button class="edit">Edit</button><button class="delete">Delete</button></li>

            </ul>
    
            <h3>Completed</h3>
            <ul id="completed-tasks" onclick="editAndDel(event)">
                <li><input type="checkbox" checked><label>See the Doctor</label><input type="text"><button class="edit">Edit</button><button class="delete">Delete</button></li>
            </ul>
        </div>
        <script>
            //function to add items in to do list
            var flag = null;
        function myFun(){
           
            var  labelData= document.getElementById("new-task").value;
            
            list=document.createElement("li");
            lbl=document.createElement("label");
             checkbox=document.createElement("input");
             checkbox.type='checkbox';
             checkbox.className='checkbox';
        
             button1=document.createElement("button");
             button1.innerHTML="Edit";
             button1.className="edit"
        
             button2=document.createElement("button");
             button2.innerHTML="Delete";
             button2.className="delete";

        
             lbl.appendChild(document.createTextNode(labelData));
           
            list.appendChild(checkbox);
            list.appendChild(lbl);
            list.appendChild(button1);
            list.appendChild(button2);
            document.getElementById("incomplete-tasks").appendChild(list);
            document.getElementById('new-task').value = ""; // to clear the value in the add box when a new entry is added
            
            if(flag != null){    // to remove the value
                flag.remove();
                flag = null;
            }
            document.getElementById("addBtn").innerHTML="Add";// line to chnage update btn to add btn
        }
            //FUNCTION TO edit AND DELETE ITEMS IN TO DO LIST

            function editAndDel(event){
                var click=event.target;
               if(click.className=="edit"){
                var data=click.parentNode.querySelector("label").innerHTML;
                document.getElementById("new-task").value=data;
                document.getElementById("addBtn").innerHTML="Update";
                flag = event.target.parentNode;
                let x=document.getElementById("addBtn").innerHTML;
                
                
               } 
         

               if(click.className=="delete"){
                click.parentNode.remove(); //to remove the parent node
                document.getElementById("addBtn").innerHTML="Add";
                document.getElementById('new-task').value = "";
               }




               
 
            //condition to put elements in completed task if chechbox is checked
            if(click.className=="checkbox"){
                if(click.checked == true){

                    var compTask=document.getElementById("completed-tasks");
                    var li=document.createElement("li");
                    var select=click.parentNode.querySelector("label").innerHTML;

                    li.innerHTML=`<input type="checkbox" checked><label>${select}</label><input type="text"><button class="edit">Edit</button><button class="delete">Delete</button>`
                    compTask.appendChild(li);
                    click.parentNode.remove();
                }
                else{

                    var incompTask=document.getElementById("incomplete-tasks");
                    var li=document.createElement("li");
                    var select=click.parentNode.querySelector("label");

                    li.innerHTML=`<input type="checkbox" checked><label>${select}</label><input type="text"><button class="edit">Edit</button><button class="delete">Delete</button>`
                    incompTask.appendChild(li);
                    click.parentNode.remove();
                }
           }
    }

        
          
    </script>
    </body>
</html>